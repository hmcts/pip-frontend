{% from "govuk/components/table/macro.njk" import govukTable as 'govukTable' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "./macros/common-components.njk" import goBack, submitButton, mojAll %}

{% extends "template.njk" %}
{% block pageTitle %}
    {{ title }}
{% endblock %}
{% block beforeContent %}
    {{ super() }}
    {{ goBack(text = backButton) }}
{% endblock %}
{% block content %}
  <div class="parent-box alphabetical-box">
    <h1 class="govuk-heading-l">{{ title }}</h1>
    <p class="govuk-body govuk-!-font-weight-bold">{{ numberOfResults }} {{ resultsCount }}</p>
    <form action="pending-subscriptions" method="post" autocomplete="off">
        <table class="govuk-table govuk-!-width-two-thirds" data-module="moj-multi-select"
               >
            <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header vertical-center-table-header" scope="col">{{ table.column0Header }}</th>
                <th class="govuk-table__header vertical-center-table-header" scope="col">{{ table.column1Header }}</th>
                <th class="govuk-table__header vertical-center-table-header govuk-table__header--numeric" scope="col">{{ table.column2Header }}</th>
            </tr>
            </thead>
            <tbody class="govuk-table__body">
            {% for result in searchResults.numberResults %}
                    <tr class="govuk-table__row govuk-table__row--selected">
                        <td class="govuk-table__cell">
                            <div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                                <input type="checkbox" class="govuk-checkboxes__input" id={{ result.caseNumber }}
                                       value={{ result.caseNumber }}
                                       name="case-number[]"/>
                                <label class="govuk-label govuk-checkboxes__label" for="{{ result.caseNumber }}">
                                    <span class="govuk-visually-hidden">{{ select }}</span>
                                </label>
                            </div>
                        </td>
                        <td class="govuk-table__cell govuk-!-padding-top-3">{{ result.caseName }}</td>
                        <td class="govuk-table__cell govuk-table__cell--numeric govuk-!-padding-top-3">{{ result.caseNumber }}</td>
                    </tr>
            {% endfor %}

            {% for result in searchResults.urnResults %}
                <tr class="govuk-table__row govuk-table__row--selected">
                    <td class="govuk-table__cell">
                        <div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                            <input type="checkbox" class="govuk-checkboxes__input" id={{ result.caseUrn }}
                            value={{ result.caseUrn }}
                                   name="case-urn[]"/>
                            <label class="govuk-label govuk-checkboxes__label" for="{{ result.caseUrn }}">
                                <span class="govuk-visually-hidden">{{ select }}</span>
                            </label>
                        </div>
                    </td>
                    <td class="govuk-table__cell govuk-!-padding-top-3">{{ result.caseName }}</td>
                    <td class="govuk-table__cell govuk-table__cell--numeric govuk-!-padding-top-3">{{ result.caseUrn }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {{ submitButton(continueButton) }}
    </form>
    {{ super() }}
  </div>
{% endblock %}
{% block bodyEnd %}
  {{ super() }}
  {{ mojAll() }}
  <script>
    if ( window.history.replaceState ) {
      window.history.replaceState( null, null, window.location.href );
    }
  </script>
{% endblock %}
