{% extends "template.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "./macros/common-components.njk" import submitButton, goBack %}

{% block pageTitle %}
  {{ title }}
{% endblock %}
{% block beforeContent %}
  {{ super() }}
  {{ goBack() }}
{% endblock %}

{% block content %}
  <h1 class="govuk-heading-l">{{ header }}</h1>
<form action="subscription-confirmed"  method="post">
  <table class="govuk-table govuk-!-width-one">
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">{{ table.header1 }}</th>
      <th scope="col" class="govuk-table__header">{{ table.header2 }}</th>
      <th scope="col" class="govuk-table__header govuk-!-text-align-right">{{ table.header3 }}</th>
      <th scope="col" class="govuk-table__header govuk-!-text-align-right">{{ table.header4 }}</th>
    </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% for hearing in pendingSubscriptions.cases %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{ hearing.urn }}</td>
          <td class="govuk-table__cell">{{ hearing.caseNumber }}</td>
          <td class="govuk-table__cell govuk-!-text-align-right">{{ hearing.caseName }}</td>
          <td class="govuk-table__cell govuk-!-text-align-right"><a href="/remove-subscription?case={{ hearing.caseNumber }}">{{ removeText }}</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if pendingSubscriptions.cases | length == 0 %}
    <p class="govuk-body">No pending case subscriptions</p>
  {% endif %}

  <table class="govuk-table">
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header">Court or tribunal name</th>
      <th scope="col" class="govuk-table__header govuk-!-text-align-right">{{ table.header4 }}</th>
    </tr>
    </thead>
    <tbody class="govuk-table__body">
      {% for court in pendingSubscriptions.courts %}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{ court.name }}</td>
          <td class="govuk-table__cell govuk-!-text-align-right">
            <a href="/remove-subscription?court={{ court.courtId }}">{{ removeText }}</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% if pendingSubscriptions.courts | length == 0 %}
    <p class="govuk-body govuk-!-margin-bottom-8">No pending court subscriptions</p>
  {% endif %}

  <div class="govuk-!-text-align-left">
    {{ submitButton(label=buttonText) }}
    <span class="govuk-!-text-align-centre"><a class="govuk-link" href="{{ addOther_link }}">{{ addOther_text }}</a></span>
  </div>
</form>
{% endblock %}
{% block bodyEnd %}
  <script>
    if ( window.history.replaceState ) {
      window.history.replaceState(null, null, window.location.href );
    }
  </script>
  {{ super() }}
{% endblock %}
