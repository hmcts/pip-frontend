{% from "macros/common-components.njk" import goBack %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "moj/components/sub-navigation/macro.njk" import mojSubNavigation %}


{% extends "template.njk" %}
{% block pageTitle %}
  {{ "Subscription Management" | safe }}
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: text,
    href: '#',
    attributes: {
      onClick: "history.back();"
    }
  }) }}
{% endblock %}

{% block content %}
  <h1 class="govuk-heading-l">Your subscription</h1>
  {{ govukButton({
    text: 'Add new subscription',
    href: '#'
  }) }}
  {{ mojSubNavigation({
    label: 'Sub navigation',
    items: [{
      text: 'Nav item 1',
      href: '#1',
      active: true
    }, {
      text: 'Nav item 2',
      href: '#2'
    }, {
      text: 'Nav item 3',
      href: '#3'
    }]
  }) }}
  {% if caseTableData | length == 0 and courtTableData | length == 0 %}
    <p class="govuk-body">You currently have no subscriptions</p>
  {% else %}
  {# Case Subscriptions Table #}
  {{ govukTable({
    attributes: {
      'data-module': 'moj-sortable-table'
    },
    classes: 'govuk-!-margin-bottom-9',
    head: [
      {
        text: "Case name",
        attributes: {
        "aria-sort": "ascending"
        },
        classes: 'govuk-!-width-one-third'
      },
      {
        text: "Case reference number",
        attributes: {
        "aria-sort": "none"
        },
        classes: 'govuk-!-width-one-third'
      },
      {
        text: "Date added"
      },
      {
        text: "Actions",
        format: "numeric"
      }
    ],
    rows: caseTableData
  }) }}

  {# Court Subscriptions Table #}
  {{ govukTable({
    attributes: {
      'data-module': 'moj-sortable-table'
    },
    head: [
      {
        text: "Court or tribunal name",
        attributes: {
        "aria-sort": "ascending"
        },
        classes: "govuk-!-width-two-thirds"
      },
      {
        text: "Date added"
      },
      {
        text: "Actions",
        format: "numeric"
      }
    ],
    rows: courtTableData
  }) }}
  {% endif %}
{% endblock %}
